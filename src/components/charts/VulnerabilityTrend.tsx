import React from 'react'
import ReactECharts from 'echarts-for-react'
import { useVulnerabilityTrend } from '@/features/dashboard/hooks'
import { FlattenedVulnerability } from '@/features/vulnerabilities/types'
interface Props {
  data: FlattenedVulnerability[]
}

const VulnerabilityTrendChart: React.FC<Props> = (props) => {
  const { data } = props
  const chartData = useVulnerabilityTrend(data)

  const option = {
    title: {
      text: 'Trend of Vulnerabilities Over Time',
      left: 'center'
    },
    tooltip: {
      trigger: 'axis',
    },
    xAxis: {
      type: 'category',
      data: chartData.map((d) => d.date),
      boundaryGap: false,
    },
    yAxis: {
      type: 'value',
      name: 'Vulnerabilities',
    },
    series: [
      {
        data: chartData.map((d) => d.vulnerabilities),
        type: 'line',
        smooth: true,
        areaStyle: {},
      },
    ],
  }

  return <ReactECharts option={option} style={{ height: 400 }} />
}

export default VulnerabilityTrendChart